<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å¸æ³•æ›¸å£«ã®ãŸã‚ã®AIã²ãªå½¢</title>
    <!-- ãƒ•ã‚©ãƒ³ãƒˆèª­ã¿è¾¼ã¿ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Noto+Serif+JP:wght@600;700;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            /* å¸æ³•æ›¸å£«ç‰ˆã‚«ãƒ©ãƒ¼è¨­å®š */
            --primary-color: #333333;
            /* ã‚¿ã‚¤ãƒˆãƒ«ã‚«ãƒ©ãƒ¼ï¼š#333333ãƒ™ãƒ¼ã‚¹ */
            --primary-gradient: linear-gradient(135deg, #333333 0%, #4B5563 100%);
            
            /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆã‚«ãƒ©ãƒ¼ï¼š#9CA3AFï¼ˆ1ç®‡æ‰€ã®ã¿ã®æŒ‡å®šè‰²ï¼‰ */
            --gold-accent: #9CA3AF;
            --accent-color: #9CA3AF;
            --accent-gradient: linear-gradient(135deg, #9CA3AF 0%, #D1D5DB 100%);
            
            --bg-color: #F8F9FA;
            --card-bg: #FFFFFF;
            --text-main: #1A1A1A;
            --text-sub: #5F6368;
            --border-color: #E0E0E0;
            --input-bg: #FFFFFF;
            --input-border: #DADCE0;
            --danger-bg: #FEF7E0;
            --danger-text: #B08800;
            --modal-overlay: rgba(51, 51, 51, 0.7);
            --shadow-sm: 0 2px 4px rgba(0,0,0,0.05);
            --shadow-card: 0 8px 24px rgba(0,0,0,0.08);
            --shadow-float: 0 16px 32px rgba(0,0,0,0.12);
            --radius: 16px;
            --radius-sm: 10px;
            --spacing-unit: 20px;
        }

        /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ä¸Šæ›¸ã */
        [data-theme="dark"] {
            --primary-color: #E5E7EB;
            --primary-gradient: linear-gradient(135deg, #E5E7EB 0%, #F3F4F6 100%);
            --gold-accent: #9CA3AF;
            --bg-color: #121212;
            --card-bg: #1E1E1E;
            --text-main: #E8EAED;
            --text-sub: #9AA0A6;
            --border-color: #3C4043;
            --input-bg: #28292A;
            --input-border: #3C4043;
            --danger-bg: #3C3200;
            --danger-text: #FDD835;
            --shadow-card: 0 8px 24px rgba(0,0,0,0.4);
            --accent-gradient: linear-gradient(135deg, #6B7280 0%, #9CA3AF 100%);
        }

        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) {
                --primary-color: #E5E7EB;
                --primary-gradient: linear-gradient(135deg, #E5E7EB 0%, #F3F4F6 100%);
                --gold-accent: #9CA3AF;
                --bg-color: #121212;
                --card-bg: #1E1E1E;
                --text-main: #E8EAED;
                --text-sub: #9AA0A6;
                --border-color: #3C4043;
                --input-bg: #28292A;
                --input-border: #3C4043;
                --danger-bg: #3C3200;
                --danger-text: #FDD835;
                --shadow-card: 0 8px 24px rgba(0,0,0,0.4);
                --accent-gradient: linear-gradient(135deg, #6B7280 0%, #9CA3AF 100%);
            }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-main);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: var(--spacing-unit);
            width: 100%;
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ‡ã‚¶ã‚¤ãƒ³åˆ·æ–° */
        header {
            padding: 60px 10px 30px;
            text-align: center;
            position: relative;
        }

        /* ã‚¢ãƒ—ãƒªåï¼šãƒ‡ã‚¶ã‚¤ãƒ³å¼·åŒ– */
        h1 {
            font-family: 'Noto Serif JP', serif;
            font-size: 28px;
            font-weight: 900;
            color: var(--text-main);
            letter-spacing: 0.08em;
            margin: 0;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            color: #333333; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.05);
            position: relative;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        h1::after {
            content: '';
            display: block;
            width: 40px;
            height: 3px;
            background: var(--gold-accent);
            position: absolute;
            bottom: -12px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        [data-theme="dark"] h1 {
            background: none;
            -webkit-text-fill-color: initial;
            color: #FFFFFF;
            text-shadow: 0 2px 4px rgba(0,0,0,0.5);
        }
        @media (prefers-color-scheme: dark) {
            :root:not([data-theme="light"]) h1 {
                background: none;
                -webkit-text-fill-color: initial;
                color: #FFFFFF;
                text-shadow: 0 2px 4px rgba(0,0,0,0.5);
            }
        }

        /* è¨­å®šãƒœã‚¿ãƒ³ä½ç½®å¤‰æ›´ï¼šå³ä¸Šã«ç‹¬ç«‹ã•ã›ã‚‹ */
        .settings-btn {
            position: absolute;
            right: 16px;
            top: 16px;
            transform: none;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--text-sub);
            padding: 8px;
            opacity: 0.6;
            transition: opacity 0.2s, transform 0.2s;
            z-index: 10;
        }
        .settings-btn:hover {
            opacity: 1;
            transform: rotate(30deg);
        }

        .subtitle {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 14px;
            color: var(--text-sub);
            margin-top: 24px;
            margin-bottom: 24px;
            font-weight: 500;
            line-height: 1.8;
            letter-spacing: 0.05em;
        }

        .usage-link {
            display: inline-block;
            font-size: 12px;
            color: var(--text-sub);
            background: transparent;
            border: 1px solid var(--border-color);
            padding: 6px 16px;
            border-radius: 20px;
            text-decoration: none;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
        }
        .usage-link:hover {
            border-color: var(--gold-accent);
            color: var(--text-main);
        }

        /* ã‚«ãƒ¼ãƒ‰ã‚°ãƒªãƒƒãƒ‰ */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 40px;
        }

        .card {
            background: var(--card-bg);
            border-radius: var(--radius);
            padding: 24px 16px;
            box-shadow: var(--shadow-card);
            cursor: pointer;
            transition: transform 0.2s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.2s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            height: 160px;
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: var(--accent-gradient);
            opacity: 0.8;
        }

        .card:active { transform: scale(0.96); box-shadow: var(--shadow-sm); }
        .card:hover {
            border-color: rgba(156, 163, 175, 0.3);
            box-shadow: var(--shadow-float);
        }

        .card-icon {
            font-size: 38px;
            margin-bottom: 16px;
            filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
        }

        .card-title {
            font-weight: 700;
            font-size: 15px;
            line-height: 1.5;
            color: var(--text-main);
            letter-spacing: 0.02em;
        }

        /* é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
        .magic-section {
            margin-top: 10px;
            margin-bottom: 40px;
        }

        .magic-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 19px;
            font-weight: 900;
            color: var(--text-main);
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            letter-spacing: 0.05em;
        }
        
        .magic-title::before {
            content: 'âœ¦';
            color: var(--gold-accent);
            margin-right: 8px;
            font-size: 20px;
        }

        .magic-title span {
            font-family: 'Noto Sans JP', sans-serif;
            font-size: 11px;
            font-weight: 500;
            color: var(--text-sub);
            margin-left: 12px;
            background: rgba(0,0,0,0.04);
            padding: 3px 8px;
            border-radius: 4px;
            letter-spacing: 0.05em;
        }

        .tool-group {
            background: var(--card-bg);
            border-radius: var(--radius);
            margin-bottom: 16px;
            box-shadow: var(--shadow-sm);
            overflow: hidden;
            border: 1px solid var(--border-color);
            transition: box-shadow 0.2s;
        }

        .tool-group:hover {
            box-shadow: var(--shadow-card);
        }

        .tool-summary {
            padding: 18px 20px;
            cursor: pointer;
            font-weight: 700;
            font-size: 16px;
            color: var(--text-main);
            display: flex;
            align-items: center;
            justify-content: space-between;
            list-style: none;
            background: linear-gradient(to right, var(--card-bg), rgba(0,0,0,0.01));
        }
        
        .tool-summary::-webkit-details-marker { display: none; }

        .tool-icon { margin-right: 12px; font-size: 20px; }
        
        .tool-role {
            font-size: 11px;
            font-weight: 600;
            color: var(--text-sub);
            background: var(--input-bg);
            padding: 4px 10px;
            border-radius: 20px;
            margin-left: auto;
            margin-right: 12px;
            letter-spacing: 0.05em;
        }

        .arrow-icon {
            font-size: 12px;
            color: var(--text-sub);
            transition: transform 0.2s;
        }

        details[open] .arrow-icon { transform: rotate(180deg); }

        .prompt-list {
            padding: 0 20px 20px;
            background: var(--card-bg);
            border-top: 1px solid var(--border-color);
        }

        .prompt-item {
            display: flex;
            flex-direction: column;
            padding: 16px 0;
            border-bottom: 1px dashed var(--border-color);
        }

        .prompt-item:last-child { border-bottom: none; padding-bottom: 0; }
        .prompt-item:first-child { padding-top: 20px; }

        .prompt-label {
            font-size: 14px;
            font-weight: 700;
            color: var(--text-main);
            margin-bottom: 8px;
            display: flex;
            align-items: center;
        }
        
        .prompt-label::before {
            content: 'â—';
            color: var(--accent-color);
            font-size: 8px;
            margin-right: 8px;
        }

        .prompt-content {
            font-size: 13px;
            color: var(--text-sub);
            background: var(--input-bg);
            padding: 14px;
            border-radius: 8px;
            margin-bottom: 10px;
            line-height: 1.7;
            white-space: pre-wrap;
            border: 1px solid transparent;
        }

        .prompt-copy-btn {
            align-self: flex-end;
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--accent-color);
            font-size: 12px;
            font-weight: 600;
            padding: 6px 14px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
        }

        .prompt-copy-btn::before {
            content: "ğŸ“‹";
            font-size: 12px;
            margin-right: 4px;
        }

        .prompt-copy-btn:hover {
            background: var(--accent-color);
            color: #fff;
            border-color: var(--accent-color);
        }

        /* ã‚·ãƒ¼ãƒ³ç”»é¢ */
        .scene-view {
            display: none;
            flex-direction: column;
            height: 100%;
        }

        .nav-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            position: relative;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .back-btn {
            background: none;
            border: none;
            color: var(--text-sub);
            font-size: 15px;
            font-weight: 700;
            padding: 8px 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            transition: color 0.2s;
        }
        .back-btn:hover { color: var(--text-main); }
        .back-btn::before {
            content: "â€¹";
            font-size: 28px;
            margin-right: 4px;
            margin-top: -4px;
        }

        .scene-title {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-family: 'Noto Serif JP', serif;
            font-weight: 900;
            font-size: 18px;
            color: var(--text-main);
            letter-spacing: 0.05em;
        }

        .form-group { margin-bottom: 24px; position: relative; } /* position relativeè¿½åŠ  */

        label {
            display: block;
            font-size: 14px;
            font-weight: 700;
            color: var(--text-sub);
            margin-bottom: 10px;
            letter-spacing: 0.02em;
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 16px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--input-border);
            background: var(--input-bg);
            color: var(--text-main);
            font-size: 16px;
            font-family: inherit;
            resize: none;
            outline: none;
            appearance: none;
            transition: border-color 0.2s, box-shadow 0.2s;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
            line-height: 1.8;
        }

        textarea::placeholder { color: #AAA; font-size: 14px; line-height: 1.7; }
        textarea:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(156, 163, 175, 0.3);
            background: var(--card-bg);
        }

        /* æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ */
        .char-counter {
            position: absolute;
            bottom: -22px; /* ä¸‹éƒ¨ã«é…ç½® */
            right: 4px;
            font-size: 11px;
            color: var(--text-sub);
            opacity: 0.8;
            font-family: 'Noto Sans JP', sans-serif;
        }

        select {
            width: 100%;
            padding: 14px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--input-border);
            background: var(--card-bg);
            color: var(--text-main);
            font-size: 16px;
            font-family: inherit;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%235c6c7b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 16px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
        }

        .warning-box {
            background-color: var(--danger-bg);
            color: var(--danger-text);
            padding: 16px;
            border-radius: var(--radius-sm);
            font-size: 13px;
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            display: none;
            animation: fadeIn 0.3s ease;
            border-left: 4px solid var(--danger-text);
        }
        .warning-icon { margin-right: 12px; font-size: 18px; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            padding: 16px;
            border-radius: 50px;
            border: none;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s;
            margin-bottom: 16px;
            letter-spacing: 0.05em;
        }
        .btn:active { transform: scale(0.98); }

        .btn-primary {
            background: var(--primary-gradient);
            color: #fff;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        .btn-primary:hover { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25); filter: brightness(1.1); }

        .btn-secondary {
            background: var(--card-bg);
            color: var(--text-main);
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }
        .btn-secondary:hover { background: var(--bg-color); }
        
        .btn-clear {
            background: none;
            border: none;
            color: var(--text-sub);
            font-size: 13px;
            box-shadow: none;
            padding: 8px;
            margin-top: 4px;
            text-decoration: none;
            opacity: 0.7;
        }
        .btn-clear:hover { opacity: 1; }

        .result-area {
            margin-top: 32px;
            display: none;
            border-top: 1px solid var(--border-color);
            padding-top: 32px;
        }

        .result-box {
            background: var(--input-bg);
            padding: 24px;
            border-radius: var(--radius-sm);
            font-size: 14px;
            margin-bottom: 24px;
            white-space: pre-wrap;
            border: 1px solid var(--border-color);
            max-height: 400px;
            overflow-y: auto;
            line-height: 1.8;
            color: var(--text-main);
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.03);
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--modal-overlay);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 200;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.2s;
            backdrop-filter: blur(8px);
        }
        .modal-overlay.open { display: flex; opacity: 1; }

        .modal-content {
            background: var(--card-bg);
            width: 100%;
            max-width: 500px;
            border-radius: var(--radius);
            padding: 32px 28px;
            position: relative;
            box-shadow: var(--shadow-float);
            max-height: 85vh;
            overflow-y: auto;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            font-size: 28px;
            background: none;
            border: none;
            color: var(--text-sub);
            cursor: pointer;
            padding: 4px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.2s;
        }
        .modal-close:hover { background: var(--bg-color); }

        .modal-title {
            font-family: 'Noto Serif JP', serif;
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 24px;
            color: var(--text-main);
            border-bottom: 1px solid var(--border-color);
            padding-bottom: 12px;
            letter-spacing: 0.05em;
        }

        .modal-section { margin-bottom: 32px; }

        .modal-h3 {
            font-size: 15px;
            font-weight: 700;
            margin-bottom: 12px;
            color: var(--text-main);
            display: flex;
            align-items: center;
            letter-spacing: 0.05em;
        }
        .modal-h3::before {
            content: '';
            display: inline-block;
            width: 4px;
            height: 16px;
            background: var(--gold-accent);
            margin-right: 10px;
            border-radius: 2px;
        }

        .modal-text {
            font-size: 14px;
            color: var(--text-main);
            margin-bottom: 8px;
            line-height: 1.8;
        }

        .modal-list {
            padding-left: 0;
            list-style: none;
            font-size: 14px;
            color: var(--text-main);
            margin-bottom: 8px;
        }
        .modal-list li {
            margin-bottom: 12px;
            position: relative;
            padding-left: 20px;
            line-height: 1.8;
        }
        .modal-list li::before {
            content: "âœ”";
            color: var(--gold-accent);
            position: absolute;
            left: 0;
            top: 0;
            font-size: 12px;
        }

        .settings-row { margin-bottom: 24px; }

        .theme-select {
            width: 100%;
            padding: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background: var(--input-bg);
            color: var(--text-main);
            font-size: 16px;
        }

        /* NGãƒ¯ãƒ¼ãƒ‰è¨­å®šç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«è¿½åŠ  */
        .settings-textarea {
            width: 100%;
            height: 80px;
            padding: 12px;
            border-radius: var(--radius-sm);
            border: 1px solid var(--border-color);
            background: var(--input-bg);
            color: var(--text-main);
            font-size: 14px;
            resize: none;
            margin-bottom: 4px;
            line-height: 1.6;
        }
        .settings-textarea:focus {
            border-color: var(--accent-color);
            outline: none;
        }
        .settings-note {
            font-size: 12px;
            color: var(--text-sub);
            margin-top: 6px;
            line-height: 1.5;
        }

        .demo-area {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px dashed var(--border-color);
            text-align: center;
        }
        
        .demo-label {
            font-size: 12px;
            color: var(--text-sub);
            opacity: 0.8;
            margin-bottom: 12px;
            display: block;
            font-weight: 500;
        }

        .btn-demo {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-sub);
            font-size: 12px;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            margin: 0 4px;
            transition: all 0.2s;
        }
        .btn-demo:hover {
            background: var(--bg-color);
            border-color: var(--text-sub);
            color: var(--text-main);
        }

        /* ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ */
        #toast {
            visibility: hidden;
            min-width: 250px;
            background: rgba(51, 51, 51, 0.98);
            color: #fff;
            text-align: center;
            border-radius: 50px;
            padding: 14px 24px;
            position: fixed;
            z-index: 300;
            left: 50%;
            bottom: 30px;
            transform: translateX(-50%) translateY(10px);
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            letter-spacing: 0.05em;
        }
        #toast.show {
            visibility: visible;
            opacity: 1;
            transform: translateX(-50%) translateY(0);
            bottom: 50px;
        }
    </style>
</head>
<body>

    <!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ -->
    <div id="toast">ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ</div>

    <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
    <div id="home-view" class="container">
        <header>
            <button class="settings-btn" onclick="app.openSettings()">âš™ï¸</button>
            <h1><span style="font-size: 24px; margin-right: 8px;">ğŸ“„</span>å¸æ³•æ›¸å£«ã®ãŸã‚ã®AIã²ãªå½¢</h1>
            <div class="subtitle">æŠœã‘ãªãã€è¿·ã‚ãšã€‚</div>
            <div onclick="app.openUsage()" class="usage-link">ä½¿ã„æ–¹ã‚’è¦‹ã‚‹</div>
        </header>

        <div class="grid">
            <div class="card" onclick="app.openScene('A')">
                <div class="card-icon">ğŸ“</div>
                <div class="card-title">æ‰“ã¡åˆã‚ã›æ•´ç†<br>ã²ãªå½¢</div>
            </div>
            <div class="card" onclick="app.openScene('B')">
                <div class="card-icon">âš–ï¸</div>
                <div class="card-title">æ›¸é¢æ§‹æˆ<br>ã²ãªå½¢</div>
            </div>
            <div class="card" onclick="app.openScene('C')">
                <div class="card-icon">ğŸ—£ï¸</div>
                <div class="card-title">ä¾é ¼è€…èª¬æ˜<br>ã²ãªå½¢</div>
            </div>
            <div class="card" onclick="app.openScene('D')">
                <div class="card-icon">ğŸ”’</div>
                <div class="card-title">åŒ¿ååŒ–<br>ã²ãªå½¢</div>
            </div>
        </div>

        <!-- é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <div class="magic-section">
            <div class="magic-title">AIåˆ¥ é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ <span>Copy & Paste</span></div>

            <!-- ChatGPT (ç§˜æ›¸) -->
            <details class="tool-group">
                <summary class="tool-summary">
                    <div style="display:flex; align-items:center;">
                        <span class="tool-icon">ğŸ¤–</span>
                        <span>ChatGPT</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tool-role">ç§˜æ›¸å½¹</span>
                        <span class="arrow-icon">â–¼</span>
                    </div>
                </summary>
                <div class="prompt-list">
                    <div class="prompt-item">
                        <div class="prompt-label">ä¾é ¼è€…ãƒ¡ãƒ¼ãƒ«è¿”ä¿¡ï¼ˆä¸è¶³è³‡æ–™ã®æå‡ºä¾é ¼ï¼‰</div>
                        <div class="prompt-content">ä»¥ä¸‹ã®ä¾é ¼è€…ã‹ã‚‰ã®ãƒ¡ãƒ¼ãƒ«ã«å¯¾ã—ã€ä¸è¶³ã—ã¦ã„ã‚‹è³‡æ–™ï¼ˆå°é‘‘è¨¼æ˜æ›¸ã€æˆ¸ç±è¬„æœ¬ãªã©ï¼‰ã®æå‡ºã‚’ã€ä¸å¯§ã‹ã¤æ˜ç¢ºã«ä¾é ¼ã™ã‚‹è¿”ä¿¡æ–‡æ¡ˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">é¢è«‡ãƒ¡ãƒ¢æ¸…æ›¸ï¼ˆç›¸ç¶š ç™»è¨˜ã®æ‰“åˆã›è­°äº‹éŒ²ï¼‰</div>
                        <div class="prompt-content">ä»¥ä¸‹ã®ä¹±é›‘ãªé¢è«‡ãƒ¡ãƒ¢ï¼ˆç›¸ç¶šãƒ»ç™»è¨˜ç›¸è«‡ï¼‰ã‚’ã€äº‹å‹™æ‰€å†…ã§å…±æœ‰ã™ã‚‹ãŸã‚ã®æ­£å¼ãªè­°äº‹éŒ²ã¨ã—ã¦æ¸…æ›¸ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">å¿…è¦æ›¸é¡ãƒã‚§ãƒƒã‚¯ä¾é ¼æ–‡ï¼ˆè§’ã‚’ç«‹ã¦ãšã«ï¼‰</div>
                        <div class="prompt-content">ä¾é ¼è€…ã«ç™»è¨˜ç”³è«‹ã«å¿…è¦ãªæ›¸é¡ã‚’ç¢ºèªã—ã¦ã‚‚ã‚‰ã†ãŸã‚ã®ä¾é ¼æ–‡ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚å°‚é–€ç”¨èªã‚’é¿ã‘ã€è§’ãŒç«‹ãŸãªã„è¡¨ç¾ã«ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">ç›¸ç¶šé–¢ä¿‚èª¬æ˜æ–‡ï¼ˆã‚ã‹ã‚Šã‚„ã™ãï¼‰</div>
                        <div class="prompt-content">ä»¥ä¸‹ã®è¤‡é›‘ãªç›¸ç¶šé–¢ä¿‚ã‚„æ³•å®šç›¸ç¶šåˆ†ã«ã¤ã„ã¦ã€ä¾é ¼è€…ãŒç†è§£ã—ã‚„ã™ã„å¹³æ˜“ãªæ—¥æœ¬èªã§èª¬æ˜ã™ã‚‹æ–‡ç« ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è«–ç‚¹æ•´ç†ï¼ˆè¿½åŠ è³ªå•ãƒªã‚¹ãƒˆï¼‰</div>
                        <div class="prompt-content">ä»¥ä¸‹ã®ç›¸è«‡å†…å®¹ã‹ã‚‰ã€ç™»è¨˜æ‰‹ç¶šãä¸Šã®è«–ç‚¹ã‚„ãƒªã‚¹ã‚¯ã«ãªã‚Šãã†ãªç‚¹ã‚’æ•´ç†ã—ã€è¿½åŠ ã§ãƒ’ã‚¢ãƒªãƒ³ã‚°ã™ã¹ãè³ªå•ãƒªã‚¹ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </div>
            </details>

            <!-- Gemini (èª¿æŸ»å“¡) -->
            <details class="tool-group">
                <summary class="tool-summary">
                    <div style="display:flex; align-items:center;">
                        <span class="tool-icon">ğŸ’</span>
                        <span>Gemini</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tool-role">èª¿æŸ»å“¡å½¹</span>
                        <span class="arrow-icon">â–¼</span>
                    </div>
                </summary>
                <div class="prompt-list">
                    <div class="prompt-item">
                        <div class="prompt-label">ç›¸ç¶šç™»è¨˜ã®å…¬çš„æ‰‹ç¶šãæ¡ˆå†…ã®ç¢ºèªï¼ˆå‡ºå…¸ä»˜ãï¼‰</div>
                        <div class="prompt-content">ç›¸ç¶šç™»è¨˜ã®ç”³è«‹æ‰‹ç¶šãã«ã¤ã„ã¦ã€æ³•å‹™å±€ã®å…¬å¼ã‚µã‚¤ãƒˆç­‰ã®ä¿¡é ¼ã§ãã‚‹æƒ…å ±æºã«åŸºã¥ãã€æ‰‹é †ã¨å‡ºå…¸ã‚’ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">æˆ¸ç±åé›†ã®ä¸€èˆ¬çš„æ³¨æ„ç‚¹ï¼ˆå‡ºå…¸ä»˜ãï¼‰</div>
                        <div class="prompt-content">æˆ¸ç±åé›†ã‚’è¡Œã†éš›ã®ä¸€èˆ¬çš„ãªæ³¨æ„ç‚¹ï¼ˆé¡ã‚‹ç¯„å›²ã€æ”¹è£½åŸæˆ¸ç±ãªã©ï¼‰ã«ã¤ã„ã¦ã€å…¬çš„æ©Ÿé–¢ã®å‡ºå…¸ã‚’æ˜è¨˜ã—ã¦ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">ç™»è¨˜ç”³è«‹ã«å¿…è¦ãªä¸€èˆ¬çš„æ›¸é¡ã®æ•´ç†ï¼ˆå‡ºå…¸ä»˜ãï¼‰</div>
                        <div class="prompt-content">â—‹â—‹ç™»è¨˜ï¼ˆä¾‹ï¼šæ‰€æœ‰æ¨©ç§»è»¢ï¼‰ã®ç”³è«‹ã«ä¸€èˆ¬çš„ã«å¿…è¦ã¨ãªã‚‹æ›¸é¡ãƒªã‚¹ãƒˆã‚’ã€æ³•å‹™å±€ã®æ¡ˆå†…ç­‰ã«åŸºã¥ã„ã¦æ•´ç†ã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">æ¤œç´¢ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¡ˆï¼ˆæ³•å‹™å±€ æ‰‹å¼•ã Q&Aï¼‰</div>
                        <div class="prompt-content">ã“ã®ç™»è¨˜æ‰‹ç¶šãã«ã¤ã„ã¦ã€æ³•å‹™å±€ã®æ‰‹å¼•ãã‚„Q&Aã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã®åŠ¹æœçš„ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®çµ„ã¿åˆã‚ã›ã‚’5ãƒ‘ã‚¿ãƒ¼ãƒ³ææ¡ˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">ã‚ˆãã‚ã‚‹ä¸å‚™åŸå› èª¿æŸ»ï¼ˆä¸€èˆ¬è«–ã¨ã—ã¦ï¼‰</div>
                        <div class="prompt-content">ç™»è¨˜ç”³è«‹ã«ãŠã„ã¦è£œæ­£å¯¾è±¡ã¨ãªã‚Šã‚„ã™ã„ã€Œã‚ˆãã‚ã‚‹ä¸å‚™åŸå› ã€ã«ã¤ã„ã¦ã€ä¸€èˆ¬è«–ã¨ã—ã¦èª¿æŸ»ã—è¦ç‚¹ã‚’ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </div>
            </details>

            <!-- NotebookLM (å›³æ›¸é¤¨) -->
            <details class="tool-group">
                <summary class="tool-summary">
                    <div style="display:flex; align-items:center;">
                        <span class="tool-icon">ğŸ“š</span>
                        <span>NotebookLM</span>
                    </div>
                    <div style="display:flex; align-items:center;">
                        <span class="tool-role">å›³æ›¸é¤¨å½¹</span>
                        <span class="arrow-icon">â–¼</span>
                    </div>
                </summary>
                <div class="prompt-list">
                    <div class="prompt-item">
                        <div class="prompt-label">è³‡æ–™ä¸€å¼ã‹ã‚‰ä¸è¶³æƒ…å ±æŠ½å‡º</div>
                        <div class="prompt-content">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ãŸè³‡æ–™ä¸€å¼ï¼ˆç™»è¨˜åŸå› è¨¼æ˜æƒ…å ±æ¡ˆã€æˆ¸ç±ç­‰ï¼‰ã‚’èª­ã¿è¾¼ã¿ã€ç”³è«‹ã«ã‚ãŸã£ã¦ä¸è¶³ã—ã¦ã„ã‚‹æƒ…å ±ã‚„æ›¸é¡ã‚’æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">æ™‚ç³»åˆ—è¡¨ï¼‹è¨¼æ‹ å¯¾å¿œè¡¨</div>
                        <div class="prompt-content">è³‡æ–™ã«åŸºã¥ãã€ç›¸ç¶šç™ºç”Ÿã‹ã‚‰ç¾åœ¨ã¾ã§ã®çµŒç·¯ã‚’æ™‚ç³»åˆ—é †ã«ä¸¦ã¹ã€è£ä»˜ã‘ã¨ãªã‚‹è¨¼æ‹ è³‡æ–™ã‚’å¯¾å¿œã•ã›ãŸè¡¨ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">ä¾é ¼è€…æå‡ºè³‡æ–™ã®æ•´ç†</div>
                        <div class="prompt-content">ä¾é ¼è€…ã‹ã‚‰æå‡ºã•ã‚ŒãŸå¤§é‡ã®è³‡æ–™ã‚’åˆ†é¡ãƒ»æ•´ç†ã—ã€ä½•ãŒæƒã£ã¦ã„ã¦ä½•ãŒè¶³ã‚Šãªã„ã‹ã®ä¸€è¦§ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è¤‡æ•°è³‡æ–™ã®çŸ›ç›¾ç‚¹æŠ½å‡º</div>
                        <div class="prompt-content">è¤‡æ•°ã®è³‡æ–™ï¼ˆéºç”£åˆ†å‰²å”è­°æ›¸æ¡ˆã¨å°é‘‘è¨¼æ˜æ›¸ãªã©ï¼‰ã®é–“ã§ã€ä½æ‰€ã‚„æ°åã€æ—¥ä»˜ãªã©ã®çŸ›ç›¾ç‚¹ãŒãªã„ã‹æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                    <div class="prompt-item">
                        <div class="prompt-label">è³ªå•äº‹é …æ¡ˆï¼ˆä¾é ¼è€…å‘ã‘ï¼‰</div>
                        <div class="prompt-content">è³‡æ–™ã®å†…å®¹ã‚’è¸ã¾ãˆã€äº‹å®Ÿç¢ºèªã®ãŸã‚ã«ä¾é ¼è€…ã«å¯¾ã—ã¦ãƒ’ã‚¢ãƒªãƒ³ã‚°ã™ã¹ãå…·ä½“çš„ãªè³ªå•äº‹é …ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚</div>
                        <button class="prompt-copy-btn" onclick="app.copyText(this)">ã‚³ãƒ”ãƒ¼</button>
                    </div>
                </div>
            </details>
        </div>
    </div>

    <!-- ã‚·ãƒ¼ãƒ³ç”»é¢ (å…±é€šãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ) -->
    <div id="scene-view" class="container scene-view">
        <div class="nav-header">
            <button class="back-btn" onclick="app.goHome()">æˆ»ã‚‹</button>
            <div class="scene-title" id="scene-title-text">ã‚·ãƒ¼ãƒ³å</div>
            <button class="settings-btn" onclick="app.openSettings()">âš™ï¸</button>
        </div>

        <div class="form-group">
            <label>å…¥åŠ›æ¬„ï¼ˆã“ã“ã«è²¼ã‚Šä»˜ã‘ï¼‰</label>
            <!-- spellcheck="false"ã‚’è¿½åŠ ã—ã¦èµ¤ç·šé˜²æ­¢ -->
            <textarea id="user-input" placeholder="" oninput="app.checkInput()" spellcheck="false"></textarea>
            <!-- æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼è¿½åŠ  -->
            <div id="char-count" class="char-counter">0æ–‡å­—</div>
        </div>

        <div id="warning-box" class="warning-box">
            <span class="warning-icon">âš ï¸</span>
            <!-- è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºã‚¨ãƒªã‚¢ -->
            <div id="warning-msg"></div>
        </div>

        <div class="form-group" id="option-container">
            <div id="opt-B" class="opt-group" style="display:none;">
                <label>ä½œæˆç›®çš„</label>
                <select id="select-B">
                    <option value="ãƒ¡ãƒ¢ç”¨">ãƒ¡ãƒ¢ç”¨ï¼ˆçŸ­ãæ•´ç†ï¼‰</option>
                    <option value="ç¤¾å†…æ–‡æ›¸ç”¨">ç¤¾å†…æ–‡æ›¸ç”¨ï¼ˆæ§‹æˆæ¡ˆã¨ã—ã¦ï¼‰</option>
                </select>
            </div>
            <div id="opt-C" class="opt-group" style="display:none;">
                <label>æ–‡ç« ã®é•·ã•</label>
                <select id="select-C">
                    <option value="çŸ­ã‚">çŸ­ã‚ï¼ˆ200ã€œ300å­—ï¼‰</option>
                    <option value="æ™®é€š" selected>æ™®é€šï¼ˆ400ã€œ600å­—ï¼‰</option>
                    <option value="ä¸å¯§">ä¸å¯§ï¼ˆ800å­—å‰å¾Œãƒ»ä¾‹ãˆã‚ã‚Šï¼‰</option>
                </select>
            </div>
            <div id="opt-D" class="opt-group" style="display:none;">
                <label>åŒ¿ååŒ–ãƒ¬ãƒ™ãƒ«</label>
                <select id="select-D">
                    <option value="ä½">ä½ï¼ˆå€‹äººåãƒ»ä¼šç¤¾åã®ã¿ï¼‰</option>
                    <option value="ä¸­" selected>ä¸­ï¼ˆåœ°åãƒ»æ—¥æ™‚ã‚‚å«ã‚ã‚‹ï¼‰</option>
                    <option value="é«˜">é«˜ï¼ˆç‰¹å®šã•ã‚Œã†ã‚‹å½¹è·ç­‰ã‚‚ã¼ã‹ã™ï¼‰</option>
                </select>
            </div>
        </div>

        <button class="btn btn-primary" onclick="app.generate()">ç”Ÿæˆã™ã‚‹</button>

        <div id="result-area" class="result-area">
            <label>ç”Ÿæˆçµæœï¼ˆAIã¸ã®æŒ‡ç¤ºãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰</label>
            <div class="result-box" id="result-text"></div>
            <!-- IDã‚’è¿½åŠ ã—ã¦JSã§æ“ä½œå¯èƒ½ã« -->
            <button id="copy-btn" class="btn btn-secondary" onclick="app.copyResult()">ã‚³ãƒ”ãƒ¼ã™ã‚‹</button>
            <button class="btn btn-clear" onclick="app.clearInput()">å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢</button>
        </div>
    </div>

    <!-- ä½¿ã„æ–¹ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="usage-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closeModal('usage-modal')">Ã—</button>
            <div class="modal-title">ä½¿ã„æ–¹ãƒ»ç›®çš„</div>
            <div class="modal-section">
                <div class="modal-h3">ã‚¢ãƒ—ãƒªã®ç›®çš„</div>
                <p class="modal-text">å¸æ³•æ›¸å£«æ¥­å‹™ã«ãŠã‘ã‚‹ã€ŒAIã¸ã®æŒ‡ç¤ºå‡ºã—ã€ã‚’åŠ¹ç‡åŒ–ãƒ»é«˜å“è³ªåŒ–ã™ã‚‹ãŸã‚ã®æ”¯æ´ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚<br>æ€è€ƒã‚’å¦¨ã’ã‚‹ã“ã¨ãªããƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§ã€å®Ÿå‹™ã«å³ã—ãŸç²¾åº¦ã®é«˜ã„æŒ‡ç¤ºæ–‡ï¼ˆãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼‰ã‚’ä½œæˆã§ãã¾ã™ã€‚</p>
            </div>
            <div class="modal-section">
                <div class="modal-h3">åˆ©ç”¨æ‰‹é †</div>
                <ul class="modal-list">
                    <li><strong>1. ã‚·ãƒ¼ãƒ³é¸æŠ</strong><br>ãƒ›ãƒ¼ãƒ ç”»é¢ã‹ã‚‰ã€ç›®çš„ã«åˆã£ãŸã‚·ãƒ¼ãƒ³ï¼ˆã‚«ãƒ¼ãƒ‰ï¼‰ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚</li>
                    <li><strong>2. æƒ…å ±å…¥åŠ›</strong><br>å…¥åŠ›æ¬„ã«ã€æ•´ç†ã—ãŸã„æ‰‹å…ƒã®ãƒ¡ãƒ¢ã‚„è³‡æ–™ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚</li>
                    <li><strong>3. ç”Ÿæˆå®Ÿè¡Œ</strong><br>å¿…è¦ã«å¿œã˜ã¦ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’é¸æŠã—ã€Œç”Ÿæˆã™ã‚‹ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€AIã¸ã®æœ€é©ãªæŒ‡ç¤ºæ–‡ãŒä½œæˆã•ã‚Œã¾ã™ã€‚</li>
                    <li><strong>4. æ´»ç”¨</strong><br>ãƒ›ãƒ¼ãƒ ä¸‹éƒ¨ã®ã€Œé­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã€ã§ã¯ã€å®Ÿå‹™ã§é »å‡ºã™ã‚‹å®šå‹æ–‡ã‚’ãƒ¯ãƒ³ã‚¿ãƒƒãƒ—ã§ã‚³ãƒ”ãƒ¼ã—ã¦åˆ©ç”¨ã§ãã¾ã™ã€‚</li>
                </ul>
            </div>
            <div class="modal-section">
                <div class="modal-h3">æ³¨æ„äº‹é …</div>
                <p class="modal-text">ãƒ»å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã¯ã‚µãƒ¼ãƒãƒ¼ã«é€ä¿¡ã•ã‚Œãšã€ãŠä½¿ã„ã®ç«¯æœ«å†…ã§ã®ã¿å®‰å…¨ã«å‡¦ç†ã•ã‚Œã¾ã™ã€‚<br>ãƒ»ç”Ÿæˆã•ã‚ŒãŸå›ç­”ã¯ã€å¿…ãšå°‚é–€å®¶ã¨ã—ã¦ã®çŸ¥è¦‹ã«åŸºã¥ãæœ€çµ‚ç¢ºèªã‚’è¡Œã£ã¦ãã ã•ã„ã€‚<br>ãƒ»æ¥µã‚ã¦æ©Ÿå¯†æ€§ã®é«˜ã„å€‹äººæƒ…å ±ï¼ˆç™»è¨˜ãƒ»ç›¸ç¶šãƒ»ä¾é ¼è€…æƒ…å ±ç­‰ï¼‰ã¯ã€å…¥åŠ›å‰ã«ã‚ã‚‹ç¨‹åº¦ä¼ã›ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
            </div>
        </div>
    </div>

    <!-- è¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="settings-modal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close" onclick="app.closeModal('settings-modal')">Ã—</button>
            <div class="modal-title">è¨­å®š</div>
            
            <div class="settings-row">
                <label>è‰²åˆã„ï¼ˆãƒ†ãƒ¼ãƒï¼‰</label>
                <select id="theme-select" class="theme-select" onchange="app.changeTheme(this.value)">
                    <option value="auto">ç«¯æœ«ã®è¨­å®šã«åˆã‚ã›ã‚‹</option>
                    <option value="light">ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰</option>
                    <option value="dark">ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰</option>
                </select>
            </div>
            
            <!-- NGãƒ¯ãƒ¼ãƒ‰è¨­å®šã‚’è¿½åŠ  -->
            <div class="settings-row">
                <label>NGãƒ¯ãƒ¼ãƒ‰è¨­å®š</label>
                <textarea id="ng-words-input" class="settings-textarea" placeholder="ä¾‹ï¼šå£åº§ç•ªå·, å®Ÿå°, ãƒã‚¤ãƒŠãƒ³ãƒãƒ¼, æ¨©åˆ©è¨¼, éºè¨€æ›¸å†…å®¹" onchange="app.saveNgWords()"></textarea>
                <p class="settings-note">â€»æŒ‡å®šã—ãŸå˜èªãŒå«ã¾ã‚Œã‚‹ã¨å…¥åŠ›ç”»é¢ã§è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°æŒ‡å®šå¯ï¼‰ã€‚</p>
            </div>

            <div class="demo-area">
                <span class="demo-label">ãƒ‡ãƒ¢ãƒ»å‹•ä½œç¢ºèªç”¨</span>
                <button class="btn-demo" onclick="app.loadDemoData()">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿å…¥åŠ›</button>
                <button class="btn-demo" onclick="app.clearDemoData()">ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªã‚¢</button>
            </div>
        </div>
    </div>

    <script>
        const app = {
            currentScene: null,
            ngWords: [], // NGãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ

            scenes: {
                'A': { 
                    title: 'æ‰“ã¡åˆã‚ã›æ•´ç†ã²ãªå½¢', 
                    hasOpt: false,
                    placeholder: "ç›¸è«‡æ—¥ã€è¢«ç›¸ç¶šäººã®æ­»äº¡æ—¥ã€ç›¸ç¶šäººå€™è£œï¼ˆé…å¶è€… å­ å…„å¼Ÿ ä»£è¥²ãªã©ï¼‰ã€å®¶æ—é–¢ä¿‚ã®çµŒç·¯ã€è²¡ç”£æ¦‚è¦ï¼ˆä¸å‹•ç”£ é è²¯é‡‘ æ ªå¼ è² å‚µï¼‰ã€éºè¨€ã®æœ‰ç„¡ã€ç›¸ç¶šæ”¾æ£„æ¤œè¨ã®æœ‰ç„¡ã€ç™»è¨˜åç¾©ã®ç¾çŠ¶ã€ä¾é ¼è€…ã®å¸Œæœ›ï¼ˆå††æº€ æ—©ã‚ã« åç¾©æ•´ç†ï¼‰ãªã©ãŒå«ã¾ã‚Œã‚‹æ–‡ç« ã«ã™ã‚‹" 
                },
                'B': { 
                    title: 'æ›¸é¢æ§‹æˆã²ãªå½¢', 
                    hasOpt: true, 
                    optId: 'opt-B',
                    placeholder: "å¯¾è±¡ç™»è¨˜ï¼ˆç›¸ç¶šç™»è¨˜ è´ˆä¸ å£²è²· æŠµå½“æ¨©æŠ¹æ¶ˆ å½¹å“¡å¤‰æ›´ãªã©ï¼‰ã€å¯¾è±¡ä¸å‹•ç”£æƒ…å ±ã®æ¦‚è¦ã€ä¾é ¼è€…ã®çŠ¶æ³ã€æ€¥ãåº¦ã€è³‡æ–™ã®æœ‰ç„¡ã€é–¢ä¿‚è€…ã€æ‡¸å¿µç‚¹ï¼ˆæˆ¸ç±åé›† ä¸æ˜è€… é€£çµ¡å›°é›£ ä½æ‰€å¤‰æ›´æœªäº†ï¼‰ãªã©ãŒå«ã¾ã‚Œã‚‹æ–‡ç« ã«ã™ã‚‹" 
                },
                'C': { 
                    title: 'ä¾é ¼è€…èª¬æ˜ã²ãªå½¢', 
                    hasOpt: true, 
                    optId: 'opt-C',
                    placeholder: "ç›¸ç¶šç™»è¨˜ã®æµã‚Œ å¿…è¦æœŸé–“ ä½•ã‚’æº–å‚™ã™ã‚‹ã‹ ä½•ãŒæ±ºã¾ã‚‹å¿…è¦ãŒã‚ã‚‹ã‹ è¿½åŠ è²»ç”¨ãŒç™ºç”Ÿã—ã‚„ã™ã„ç‚¹ ãªã©ã‚’èª¬æ˜ã—ãŸã„ã¨ã„ã†å…¥åŠ›ä¾‹ã«ã™ã‚‹" 
                },
                'D': { 
                    title: 'åŒ¿ååŒ–ã²ãªå½¢', 
                    hasOpt: true, 
                    optId: 'opt-D',
                    placeholder: "å€‹äººå åœ°å å…·ä½“æ—¥ä»˜ ä¸å‹•ç”£ã®æ‰€åœ¨åœ° ãªã©ãŒå«ã¾ã‚Œã‚‹äº‹ä¾‹ãƒ¡ãƒ¢ã‚’ç”¨æ„ã™ã‚‹" 
                }
            },

            init: function() {
                const savedTheme = localStorage.getItem('app_theme') || 'auto';
                document.getElementById('theme-select').value = savedTheme;
                this.changeTheme(savedTheme);
                
                // NGãƒ¯ãƒ¼ãƒ‰èª­ã¿è¾¼ã¿
                const savedNgWords = localStorage.getItem('app_ng_words') || '';
                document.getElementById('ng-words-input').value = savedNgWords;
                this.updateNgWordsList(savedNgWords);
            },
            
            // NGãƒ¯ãƒ¼ãƒ‰ä¿å­˜ãƒ»æ›´æ–°
            saveNgWords: function() {
                const input = document.getElementById('ng-words-input').value;
                localStorage.setItem('app_ng_words', input);
                this.updateNgWordsList(input);
                this.checkInput(); // å³åº§ã«ãƒã‚§ãƒƒã‚¯åæ˜ 
                this.showToast('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            },
            
            updateNgWordsList: function(text) {
                // å…¨è§’åŠè§’ã‚«ãƒ³ãƒã§åˆ†å‰²ã€ç©ºç™½é™¤å»
                this.ngWords = text.split(/,|ã€/).map(w => w.trim()).filter(w => w.length > 0);
            },

            openScene: function(sceneId) {
                this.currentScene = sceneId;
                const scene = this.scenes[sceneId];
                document.getElementById('scene-title-text').innerText = scene.title;
                document.getElementById('user-input').placeholder = scene.placeholder;
                document.getElementById('home-view').style.display = 'none';
                document.getElementById('scene-view').style.display = 'flex';
                this.clearInput();
                document.querySelectorAll('.opt-group').forEach(el => el.style.display = 'none');
                if (scene.hasOpt) {
                    document.getElementById(scene.optId).style.display = 'block';
                }
                window.scrollTo(0, 0);
            },

            goHome: function() {
                document.getElementById('scene-view').style.display = 'none';
                document.getElementById('home-view').style.display = 'flex';
                this.currentScene = null;
            },

            openUsage: function() { document.getElementById('usage-modal').classList.add('open'); },
            openSettings: function() { document.getElementById('settings-modal').classList.add('open'); },
            closeModal: function(id) { document.getElementById(id).classList.remove('open'); },

            changeTheme: function(theme) {
                localStorage.setItem('app_theme', theme);
                const root = document.documentElement;
                if (theme === 'auto') root.removeAttribute('data-theme');
                else root.setAttribute('data-theme', theme);
            },

            loadDemoData: function() {
                let targetScene = this.currentScene;
                if (!targetScene) {
                    this.openScene('A');
                    targetScene = 'A';
                    this.closeModal('settings-modal');
                } else {
                    this.closeModal('settings-modal');
                }
                const demoText = this.scenes[targetScene].placeholder.replace('ï¼ˆä¾‹ï¼‰\n', '');
                const input = document.getElementById('user-input');
                input.value = demoText;
                this.checkInput();
                this.showToast('ãƒ‡ãƒ¢ãƒ‡ãƒ¼ã‚¿ã‚’å…¥åŠ›ã—ã¾ã—ãŸ');
            },

            clearDemoData: function() {
                this.clearInput();
                this.closeModal('settings-modal');
                this.showToast('å…¥åŠ›ã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸ');
            },

            checkInput: function() {
                const text = document.getElementById('user-input').value;
                const warningBox = document.getElementById('warning-box');
                const warningMsg = document.getElementById('warning-msg');
                
                // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆæ›´æ–°
                const count = text.length;
                document.getElementById('char-count').innerText = `${count}æ–‡å­—`;
                
                // 1. å€‹äººæƒ…å ±ãƒã‚§ãƒƒã‚¯ (æ—¢å­˜)
                const piiRegex = /\d{2,4}-\d{2,4}-\d{4}|\d{3}-\d{4}/;
                const hasPii = piiRegex.test(text);
                
                // 2. NGãƒ¯ãƒ¼ãƒ‰ãƒã‚§ãƒƒã‚¯ (æ–°è¦)
                const hitNgWords = this.ngWords.filter(word => text.includes(word));
                const hasNg = hitNgWords.length > 0;

                if (hasPii || hasNg) {
                    warningBox.style.display = 'flex';
                    let msgHTML = '';
                    
                    if (hasNg) {
                         msgHTML += `<div style="margin-bottom:8px;"><strong>NGãƒ¯ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¦ã„ã¾ã™</strong><br>æ¤œçŸ¥: ${hitNgWords.join(', ')}</div>`;
                    }
                    if (hasPii) {
                         msgHTML += `<div><strong>å€‹äººæƒ…å ±ã®å¯èƒ½æ€§ã‚ã‚Š</strong><br>é›»è©±ç•ªå·ã‚„ä½æ‰€ã®ã‚ˆã†ãªæƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚</div>`;
                    }
                    
                    warningMsg.innerHTML = msgHTML;
                } else {
                    warningBox.style.display = 'none';
                    warningMsg.innerHTML = '';
                }
            },

            clearInput: function() {
                document.getElementById('user-input').value = '';
                document.getElementById('result-area').style.display = 'none';
                document.getElementById('warning-box').style.display = 'none';
                document.getElementById('char-count').innerText = '0æ–‡å­—';
            },

            generate: function() {
                const input = document.getElementById('user-input').value;
                if (!input.trim()) {
                    this.showToast('ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                    return;
                }
                let prompt = '';
                const scene = this.currentScene;
                
                // å…±é€šãƒ‘ãƒ¼ãƒ„ã®å®šç¾©
                const commonRules = `ã€æœ€çµ‚ å…±é€šãƒ«ãƒ¼ãƒ«ã€‘
ãƒ»å‡ºåŠ›ã¯ã€å¸æ³•æ›¸å£«ãŒãã®ã¾ã¾æ‰€å†…å…±æœ‰ãƒ»ä¾é ¼è€…èª¬æ˜ãƒ»æ¬¡ã®å®Ÿå‹™åˆ¤æ–­ã«ä½¿ãˆã‚‹å®Œæˆåº¦ã‚’ç›®æ¨™ã¨ã™ã‚‹ã€‚
ãƒ»å„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®åˆ†é‡ã¯3ã€œ5è¡Œã‚’ç›®å®‰ã¨ã—ã€é•·ããªã‚Šã™ãã‚‹å ´åˆã¯è¦ç‚¹å„ªå…ˆã§ç°¡æ½”ã«ã¾ã¨ã‚ã‚‹ã€‚
ãƒ»æ–­å®šã¯ç¦æ­¢ã€‚ã€Œä¸€èˆ¬çš„ã«ã¯ã€ã€Œå®Ÿå‹™ä¸Šã¯ã€ã€Œã€œã¨ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã€ã‚’å¿…ãšç”¨ã„ã‚‹ã€‚
ãƒ»æœ€çµ‚åˆ¤æ–­ãƒ»å¯å¦åˆ¤æ–­ã¯è¡Œã‚ãšã€ã€Œç¢ºèªãŒå¿…è¦ã€ã€Œå€‹åˆ¥äº‹æƒ…ã«ã‚ˆã‚‹ã€ã¨æ˜ç¤ºã™ã‚‹ã€‚
ãƒ»ä¸å®‰ã‚’ç…½ã‚‰ãšã€è½ã¡ç€ã„ãŸãƒ»å®‰å¿ƒæ„Ÿã®ã‚ã‚‹å¸æ³•æ›¸å£«ãƒˆãƒ¼ãƒ³ã§æ›¸ãã€‚`;

                const commonFooterInstruction = `ã€å…¨ã‚·ãƒ¼ãƒ³å…±é€šï¼šæ³¨æ„æ›¸ãã®è¿½åŠ ã€‘
ã™ã¹ã¦ã®å‡ºåŠ›ã®æœ«å°¾ã«ã€å¿…ãšæ¬¡ã®ä¸€æ–‡ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
ã€Œâ€»æœ¬å†…å®¹ã¯ä¸€èˆ¬çš„ãªæ•´ç†ãƒ»èª¬æ˜æ¡ˆã§ã‚ã‚Šã€æ­£å¼ãªåˆ¤æ–­ã‚„æ‰‹ç¶šãã¯å€‹åˆ¥ç¢ºèªã‚’å‰æã¨ã—ã¾ã™ã€‚ã€`;

                const specificAttention = `ã€å¸æ³•æ›¸å£«ç‰¹æœ‰ã®æ³¨æ„è¦–ç‚¹ï¼ˆå¿…ãšåæ˜ ï¼‰ã€‘
ç›¸ç¶šãƒ»ç™»è¨˜ç‰¹æœ‰ã®è¦³ç‚¹ã¨ã—ã¦ã€è©²å½“ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ç‚¹ã«å¿…ãšè§¦ã‚Œã¦ãã ã•ã„ï¼ˆç°¡æ½”ã«ä¸€è¨€ï¼‰ã€‚
ãƒ»åç¾©ãŒæœªæ•´ç†ã®ã¾ã¾æ”¾ç½®ã—ãŸå ´åˆã®å½±éŸ¿
ãƒ»æœŸé™ã‚„é †åºã‚’èª¤ã‚‹ã¨æ‰‹æˆ»ã‚ŠãŒå¤§ãã„ç‚¹`;

                const navigatorSection = `ã€å¸æ³•æ›¸å£«ã®æ¬¡ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆå®Ÿå‹™ãƒŠãƒ“ï¼‰ã€‘
ä»¥ä¸‹ã®é …ç›®ã‚’å¿…ãšå‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
ãƒ»ã¾ãšè¡Œã†ç¢ºèªï¼š
ãƒ»ä¾é ¼è€…ã¸è¿½åŠ ã§ç¢ºèªã™ã‚‹ã“ã¨ï¼š
ãƒ»ä¾é ¼è€…ã¸ä¾é ¼ã™ã‚‹è³‡æ–™ï¼š
ãƒ»ã“ã¡ã‚‰ã§å–å¾—ãƒ»æ‰‹é…ã™ã‚‹è³‡æ–™ï¼š
ãƒ»è¨˜éŒ²ãƒ»è¨¼è·¡ã¨ã—ã¦æ®‹ã™ã¹ãäº‹é …ï¼š
ãƒ»ã“ã®æ®µéšã§ã‚„ã£ã¦ã‚ˆã„ã“ã¨ï¼š
ãƒ»ã¾ã ã‚„ã‚‰ãªã„æ–¹ãŒã‚ˆã„ã“ã¨ï¼š
â€»é †ç•ªã¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’é‡è¦–ã—ã€ç„¡ç”¨ãªç„¦ã‚Šã‚’ä¸ãˆãªã„è¡¨ç¾ã‚’ç”¨ã„ã¦ãã ã•ã„ã€‚`;

                const selfCheck = `ã€æœ€çµ‚ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯ã€‘
å‡ºåŠ›å‰ã«ä»¥ä¸‹ã®ç‚¹ã‚’ç¢ºèªã—ã€å•é¡ŒãŒã‚ã‚Œã°è‡ªå‹•ä¿®æ­£ã—ã¦ã‹ã‚‰å‡ºåŠ›ã—ã¦ãã ã•ã„ã€‚
ãƒ»ã“ã®ã¾ã¾ä¾é ¼è€…ã«è¦‹ã›ã¦ã‚‚å•é¡Œãªã„ã‹
ãƒ»åŒæ¥­ã®å¸æ³•æ›¸å£«ãŒèª­ã‚“ã§ã‚‚é•å’Œæ„Ÿã¯ãªã„ã‹
ãƒ»å€‹äººç‰¹å®šãƒ»å®ˆç§˜ç¾©å‹™ãƒªã‚¹ã‚¯ã¯å®Œå…¨ã«å›é¿ã§ãã¦ã„ã‚‹ã‹`;

                if (scene === 'A') {
                    prompt = `ã‚ãªãŸã¯ç™»è¨˜ãƒ»ç›¸ç¶šå®Ÿå‹™ã«ç²¾é€šã—ãŸå¸æ³•æ›¸å£«è£œåŠ©AIã§ã™ã€‚
ä»¥ä¸‹ã®æ‰“ã¡åˆã‚ã›ãƒ¡ãƒ¢ã‚„ç›¸è«‡å†…å®¹ã‚’ã‚‚ã¨ã«ã€ç›¸ç¶šé–¢ä¿‚ã®äº‹å®Ÿæ•´ç†ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚

${commonRules}

ã€ã‚·ãƒ¼ãƒ³A æœ€çµ‚èª¿æ•´ã€‘
ãƒ»å†’é ­ã«å¿…ãšã€Œã“ã®æ•´ç†ã¯ã€ç›¸ç¶šç™»è¨˜ãƒ»æ‰‹ç¶šãã‚’å®‰å…¨ã«é€²ã‚ã‚‹ãŸã‚ã®å‰ææ•´ç†ã§ã™ã€‚ã€ã¨è¨˜è¿°ã™ã‚‹ã€‚
ãƒ»ç›¸ç¶šäººé–“ã§èªè­˜ãŒã‚ºãƒ¬ã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆã€å¾Œã‹ã‚‰äº‰ç‚¹ã«ãªã‚Šã‚„ã™ã„ç®‡æ‰€ã€æˆ¸ç±ãƒ»è³‡æ–™åé›†ã§æ™‚é–“ãŒã‹ã‹ã‚Šã‚„ã™ã„ç‚¹ã‚’å«ã‚ã‚‹ã€‚
ãƒ»ä¸è¶³æƒ…å ±ã®é …ç›®ã§ã¯ã€Œãªãœãã®æƒ…å ±ãŒå¿…è¦ã‹ã€ã‚’ä¸€è¨€æ·»ãˆã‚‹ã€‚

ã€å‡ºåŠ›é …ç›®ã€‘
1 äº‹å®Ÿé–¢ä¿‚ã®æ•´ç†ï¼ˆæ™‚ç³»åˆ—ï¼‰
2 å®¶æ—é–¢ä¿‚ã®æ•´ç†ï¼ˆé–¢ä¿‚æ€§ã®ç®‡æ¡æ›¸ãã€å¿…è¦ãªã‚‰å®¶ç³»ã®æ–‡ç« å›³ï¼‰
3 ç›¸ç¶šäººé–“ã§èªè­˜ãŒã‚ºãƒ¬ã‚„ã™ã„ãƒã‚¤ãƒ³ãƒˆãƒ»å¾Œã‹ã‚‰äº‰ç‚¹ã«ãªã‚Šã‚„ã™ã„ç®‡æ‰€
4 è²¡ç”£ã¨è² å‚µã®æ£šå¸ã—ï¼ˆä¸å‹•ç”£ é è²¯é‡‘ ãã®ä»– ä¸æ˜ç‚¹ï¼‰
5 æˆ¸ç±ãƒ»è³‡æ–™åé›†ã§æ™‚é–“ãŒã‹ã‹ã‚Šã‚„ã™ã„ç‚¹
6 ä¸è¶³æƒ…å ±ï¼ˆâ€»å¿…è¦ç†ç”±ä»˜ãï¼‰
7 é€²ã‚æ–¹ã®å…¨ä½“åƒï¼ˆæ¬¡ã«ä½•ãŒæ±ºã¾ã‚Œã°å‰ã¸é€²ã‚€ã‹ï¼‰

${specificAttention}
${navigatorSection}
${commonFooterInstruction}
${selfCheck}

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                } 
                else if (scene === 'B') {
                    const purpose = document.getElementById('select-B').value;
                    const purposeNote = purpose === 'ç¤¾å†…æ–‡æ›¸ç”¨' 
                        ? 'ç¤¾å†…å…±æœ‰ãƒ»æ§‹æˆæ¡ˆã‚’æ„è­˜ã—ãŸè¨˜è¿°' 
                        : 'ãƒ¡ãƒ¢ã¨ã—ã¦è¦ç‚¹ã‚’æ•´ç†';
                    
                    prompt = `ã‚ãªãŸã¯ç™»è¨˜ãƒ»ç›¸ç¶šå®Ÿå‹™ã«ç²¾é€šã—ãŸå¸æ³•æ›¸å£«è£œåŠ©AIã§ã™ã€‚
ä»¥ä¸‹ã®å†…å®¹ã‚’ã‚‚ã¨ã«ã€ç™»è¨˜ç”³è«‹ã®æµã‚Œã¨å¿…è¦æ›¸é¡ã®æ§‹æˆæ¡ˆã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

${commonRules}

ã€ã‚·ãƒ¼ãƒ³B æœ€çµ‚èª¿æ•´ã€‘
ãƒ»${purposeNote}
ãƒ»å®Ÿå‹™çš„ãªè¦–ç‚¹ã§æŠœã‘æ¼ã‚ŒãŒãªã„ã‚ˆã†ã«æ§‹æˆã™ã‚‹ã€‚
ãƒ»å¿…è¦æ›¸é¡ã¯å¿…ãšã€Œä¾é ¼è€…ã‹ã‚‰é ã‹ã‚‹æ›¸é¡ã€ã€Œã“ã¡ã‚‰ã§å–å¾—ãƒ»æ‰‹é…ã™ã‚‹æ›¸é¡ã€ã€ŒçŠ¶æ³æ¬¡ç¬¬ã§è¿½åŠ ã«ãªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹æ›¸é¡ã€ã®3åŒºåˆ†ã§æ•´ç†ã™ã‚‹ã€‚
ãƒ»æ³¨æ„ç‚¹ã¨ã—ã¦ã€Œä¾é ¼è€…ãŒã‚ˆãèª¤è§£ã—ã‚„ã™ã„ç‚¹ã€ã€Œå¾Œã‹ã‚‰è¿½åŠ ã«ãªã‚Šã‚„ã™ã„è³‡æ–™ã€ã‚’1ã€œ2ç‚¹æ˜ç¤ºã™ã‚‹ã€‚

ã€å‡ºåŠ›é …ç›®ã€‘
1 ç”³è«‹ã®ç›®çš„ï¼ˆä½•ã®ç™»è¨˜ã‹ï¼‰
2 å…¨ä½“ã®æµã‚Œï¼ˆã‚¹ãƒ†ãƒƒãƒ—ï¼‰
3 å¿…è¦æ›¸é¡ä¸€è¦§ï¼ˆ3åŒºåˆ†ã§æ•´ç†ï¼‰
4 ã¤ã¾ãšããƒã‚¤ãƒ³ãƒˆï¼ˆä¸è¶³ã—ã‚„ã™ã„è³‡æ–™ã€è¿½åŠ èª¿æŸ»ãŒå¿…è¦ã«ãªã‚‹å…¸å‹ï¼‰
5 ä¾é ¼è€…ã¸ã®ç¢ºèªäº‹é …ï¼ˆèª¤è§£ã—ã‚„ã™ã„ç‚¹å«ã‚€ï¼‰
6 æƒ³å®šã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼ˆä¸€èˆ¬çš„ã«ã¯ã®ç¯„å›²ã§ï¼‰

${specificAttention}
${navigatorSection}
${commonFooterInstruction}
${selfCheck}

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                } 
                else if (scene === 'C') {
                    const length = document.getElementById('select-C').value;
                    let lengthInstruction = '';
                    if (length === 'çŸ­ã‚') lengthInstruction = 'æ–‡å­—æ•°ã¯200ã€œ300å­—ç¨‹åº¦ã§ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚';
                    else if (length === 'æ™®é€š') lengthInstruction = 'æ–‡å­—æ•°ã¯400ã€œ600å­—ç¨‹åº¦ã§ã¾ã¨ã‚ã¦ãã ã•ã„ã€‚';
                    else lengthInstruction = 'æ–‡å­—æ•°ã¯800å­—å‰å¾Œã¨ã—ã€ä¾‹ãˆè©±ã‚’å°‘ã—äº¤ãˆã¦ä¸å¯§ã«èª¬æ˜ã—ã¦ãã ã•ã„ã€‚';
                    
                    prompt = `ã‚ãªãŸã¯ç™»è¨˜ãƒ»ç›¸ç¶šå®Ÿå‹™ã«ç²¾é€šã—ãŸå¸æ³•æ›¸å£«è£œåŠ©AIã§ã™ã€‚
ä»¥ä¸‹ã®å†…å®¹ã«ã¤ã„ã¦ã€å°‚é–€ç”¨èªã‚’è–„ã‚ã€ä¾é ¼è€…ã«åˆ†ã‹ã‚Šã‚„ã™ãèª¬æ˜ã™ã‚‹æ–‡ç« ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚

${commonRules}

ã€ã‚·ãƒ¼ãƒ³C æœ€çµ‚èª¿æ•´ã€‘
ãƒ»${lengthInstruction}
ãƒ»å†’é ­ã§ã¯å¿…ãšã€Œå®‰å¿ƒã—ã¦ã‚ˆã„ç‚¹ã€ã¨ã€Œæ³¨æ„ã—ã¦é€²ã‚ãŸã„ç‚¹ã€ã‚’ã‚»ãƒƒãƒˆã§ä¼ãˆã‚‹ã€‚
ãƒ»æ–‡ç« å…¨ä½“ã¯ã€Œå¸æ³•æ›¸å£«ãŒæ¨ªã§æ®µå–ã‚Šã‚’ç¢ºèªã—ãªãŒã‚‰èª¬æ˜ã—ã¦ã„ã‚‹å£èª¿ã€ã§è¨˜è¿°ã™ã‚‹ã€‚
ãƒ»å°‚é–€ç”¨èªã‚’ä½¿ã†å ´åˆã¯å¿…ãšï¼ˆ ï¼‰ã§æ—¥å¸¸èªã«è¨€ã„æ›ãˆã‚‹ã€‚

ã€å‡ºåŠ›æ§‹æˆã€‘
1 ã¾ãšçµè«–ï¼ˆå®‰å¿ƒç‚¹ã¨æ³¨æ„ç‚¹ï¼‰
2 æ‰‹ç¶šãã®å…¨ä½“åƒï¼ˆã–ã£ãã‚Šï¼‰
3 ä½•ã‚’æº–å‚™ã™ã‚‹ã‹ï¼ˆä¾é ¼è€…ãŒç”¨æ„ã™ã‚‹ã‚‚ã®ï¼‰
4 ã‚ˆãã‚ã‚‹ã¤ã¾ãšãï¼ˆå…ˆå›ã‚Šã—ã¦å®‰å¿ƒã•ã›ã‚‹ï¼‰
5 æœŸé–“ã®ç›®å®‰ï¼ˆä¸€èˆ¬çš„ã«ã¯ï¼‰
6 ã‚ˆãã‚ã‚‹è³ªå•ï¼ˆä¾é ¼è€…ãŒèããŒã¡ãªã‚‚ã®ã‚’2ã€œ3ï¼‰

${specificAttention}
${navigatorSection}
${commonFooterInstruction}
${selfCheck}

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                } 
                else if (scene === 'D') {
                    const level = document.getElementById('select-D').value;
                    let levelInstruction = '';
                    if (level === 'ä½') levelInstruction = 'å€‹äººåãƒ»ä¼šç¤¾åãƒ»å›£ä½“åã‚’ä¸€èˆ¬åè©ï¼ˆä¾‹ï¼šAæ°ã€Bç¤¾ï¼‰ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚';
                    else if (level === 'ä¸­') levelInstruction = 'å€‹äººåãƒ»ä¼šç¤¾åã«åŠ ãˆã€åœ°åã‚„å…·ä½“çš„ãªæ—¥æ™‚ã‚‚ä¸€èˆ¬åŒ–ã—ã¦ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚';
                    else levelInstruction = 'æ‰€åœ¨åœ°ã€é–¢ä¿‚è€…ã®ç¶šæŸ„ã€æ—¥ä»˜ã€è²¡ç”£è¦æ¨¡ã®ç‰¹å¾´ã€è·æ¥­ã‚„å½¹è·ãªã©ç‰¹å®šã•ã‚Œã†ã‚‹è¦ç´ ã‚‚ã™ã¹ã¦ä¸€èˆ¬åŒ–ã—ã¦ã¼ã‹ã—ã¦ãã ã•ã„ã€‚';
                    
                    prompt = `ã‚ãªãŸã¯ç™»è¨˜ãƒ»ç›¸ç¶šå®Ÿå‹™ã«ç²¾é€šã—ãŸå¸æ³•æ›¸å£«è£œåŠ©AIã§ã™ã€‚
ä»¥ä¸‹ã®äº‹ä¾‹ã‚’ã€å…±æœ‰ãƒ»ç ”ä¿®ç”¨ã«åŒ¿ååŒ–ã—ã¦ãã ã•ã„ã€‚

${commonRules}

ã€ã‚·ãƒ¼ãƒ³D æœ€çµ‚èª¿æ•´ã€‘
ãƒ»${levelInstruction}
ãƒ»åŒ¿ååŒ–å¾Œã®æ–‡ç« ã¯ã€æ–°äººå¸æ³•æ›¸å£«ãŒèª­ã‚“ã§ã‚‚æ‰‹ç¶šãã®æµã‚ŒãŒè¿½ãˆã‚‹ãƒ¬ãƒ™ãƒ«ã«ã™ã‚‹ã€‚
ãƒ»å­¦ã³ãƒã‚¤ãƒ³ãƒˆã§ã¯å¿…ãšã€Œåˆå‹•ã§è‰¯ã‹ã£ãŸç‚¹ã€ã¾ãŸã¯ã€Œå…ˆã«ç¢ºèªã—ã¦ãŠãã¹ãã ã£ãŸç‚¹ã€ã®ã©ã¡ã‚‰ã‹ã‚’å«ã‚ã‚‹ã€‚

ã€å‡ºåŠ›ã€‘
1 åŒ¿ååŒ–å¾Œã®æ–‡ç« 
2 ç½®æ›å¯¾å¿œè¡¨ï¼ˆå…ƒâ†’ç½®æ›å¾Œï¼‰
3 ã“ã®äº‹ä¾‹ã‹ã‚‰å­¦ã¹ã‚‹å®Ÿå‹™ä¸Šã®ãƒã‚¤ãƒ³ãƒˆ

${specificAttention}
${navigatorSection}
${commonFooterInstruction}
${selfCheck}

ã€å…¥åŠ›å†…å®¹ã€‘
${input}`;
                }

                document.getElementById('result-text').textContent = prompt;
                document.getElementById('result-area').style.display = 'block';
                // çµæœè¡¨ç¤ºå¾Œã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                setTimeout(() => { document.getElementById('result-area').scrollIntoView({ behavior: 'smooth' }); }, 100);
                
                // ã‚³ãƒ”ãƒ¼ãƒœã‚¿ãƒ³ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ
                const copyBtn = document.getElementById('copy-btn');
                if(copyBtn) {
                    copyBtn.textContent = 'ã‚³ãƒ”ãƒ¼ã™ã‚‹';
                    copyBtn.classList.remove('btn-primary');
                    copyBtn.classList.add('btn-secondary');
                }
            },

            copyResult: function() {
                const text = document.getElementById('result-text').textContent;
                this.performCopy(text);
            },
            
            // é­”æ³•ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”¨ã‚³ãƒ”ãƒ¼é–¢æ•°
            copyText: function(buttonElement) {
                // ãƒœã‚¿ãƒ³ã®å‰ã®è¦ç´ ï¼ˆ.prompt-contentï¼‰ã®ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
                const text = buttonElement.previousElementSibling.textContent;
                this.performCopy(text, buttonElement);
            },

            performCopy: function(text, btnElement = null) {
                if (!text) return;
                
                const onCopySuccess = () => {
                    this.showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                    
                    // ãƒœã‚¿ãƒ³ã®è¦‹ãŸç›®ã‚’ä¸€æ™‚çš„ã«å¤‰æ›´ï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ï¼‰
                    const targetBtn = btnElement || document.getElementById('copy-btn');
                    if (targetBtn) {
                        const originalText = targetBtn.textContent;
                        targetBtn.textContent = 'ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸâœ¨';
                        // è‰²ã‚’å¤‰ãˆã‚‹ãªã©ã—ã¦ã‚‚è‰¯ã„ãŒã€ã“ã“ã§ã¯ãƒ†ã‚­ã‚¹ãƒˆå¤‰æ›´ã®ã¿
                        
                        setTimeout(() => {
                            targetBtn.textContent = originalText;
                        }, 2000);
                    }
                };

                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text).then(onCopySuccess).catch(err => {
                        this.fallbackCopy(text);
                    });
                } else {
                    this.fallbackCopy(text);
                }
            },
            
            fallbackCopy: function(text) {
                try {
                    const textArea = document.createElement("textarea");
                    textArea.value = text;
                    document.body.appendChild(textArea);
                    textArea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textArea);
                    this.showToast('ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ');
                } catch (err) {
                    this.showToast('ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸ');
                }
            },

            showToast: function(message) {
                const toast = document.getElementById('toast');
                toast.textContent = message;
                toast.className = 'show';
                setTimeout(() => { toast.className = toast.className.replace('show', ''); }, 3000);
            }
        };

        app.init();
    </script>
</body>
</html>